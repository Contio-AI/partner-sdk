# Code generated by cmd/asyncapi/main.go; DO NOT EDIT.
#
# This file is generated from the Go event registry at:
#   app/api/internal/events/outbound/registry.go
#
# To regenerate this file, run:
#   task partner:webhook:generate
#
# To add or modify webhook events, update the Go types in:
#   app/api/internal/events/outbound/*.go
#
asyncapi: 2.6.0
info:
    title: Contio Partner Webhook Events
    version: 1.3.0
    description: AsyncAPI specification for Contio Partner webhook events.
    contact:
        name: Contio Partner Support
        url: https://docs.contio.ai/partner-api/
servers:
    production:
        url: https://your.domain.com/contio/webhook
        protocol: https
        description: Your Contio webhook callback endpoint (configured via Contio Partner Admin API)
channels:
    action_item.completed:
        subscribe:
            summary: Sent when an action item is marked as completed
            operationId: onActionItemCompleted
            message:
                name: action_item.completed
                payload:
                    $ref: '#/components/schemas/ActionItemCompletedPayload'
    action_item.created:
        subscribe:
            summary: Sent when a new action item is created
            operationId: onActionItemCreated
            message:
                name: action_item.created
                payload:
                    $ref: '#/components/schemas/ActionItemCreatedPayload'
    action_item.updated:
        subscribe:
            summary: Sent when an action item's status or details change
            operationId: onActionItemUpdated
            message:
                name: action_item.updated
                payload:
                    $ref: '#/components/schemas/ActionItemUpdatedPayload'
    meeting.completed:
        subscribe:
            summary: Sent when a meeting ends and notes/summary are available
            operationId: onMeetingCompleted
            message:
                name: meeting.completed
                payload:
                    $ref: '#/components/schemas/MeetingCompletedPayload'
    meeting.created:
        subscribe:
            summary: Sent when a new meeting is created
            operationId: onMeetingCreated
            message:
                name: meeting.created
                payload:
                    $ref: '#/components/schemas/MeetingCreatedPayload'
    participant.added:
        subscribe:
            summary: Sent when one or more participants are added to a meeting
            operationId: onParticipantAdded
            message:
                name: participant.added
                payload:
                    $ref: '#/components/schemas/ParticipantAddedPayload'
    participant.removed:
        subscribe:
            summary: Sent when a participant is removed from a meeting
            operationId: onParticipantRemoved
            message:
                name: participant.removed
                payload:
                    $ref: '#/components/schemas/ParticipantRemovedPayload'
    user.connection.revoked:
        subscribe:
            summary: Sent when a user revokes their connection to your partner app
            operationId: onUserConnectionRevoked
            message:
                name: user.connection.revoked
                payload:
                    $ref: '#/components/schemas/UserConnectionRevokedPayload'
    workflow.assignment.created:
        subscribe:
            summary: Sent when an action item is assigned to your workflow
            operationId: onWorkflowAssignmentCreated
            message:
                name: workflow.assignment.created
                payload:
                    $ref: '#/components/schemas/WorkflowAssignmentCreatedPayload'
components:
    schemas:
        ActionItemCompletedData:
            type: object
            required:
                - action_item_id
                - assignee_id
                - completed_at
                - completed_by_user_id
                - meeting_id
            properties:
                action_item_id:
                    type: string
                    format: uuid
                assignee_id:
                    type: string
                    format: uuid
                completed_at:
                    type: string
                    format: date-time
                completed_by_user_id:
                    type: string
                    format: uuid
                meeting_id:
                    type: string
                    format: uuid
        ActionItemCompletedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/ActionItemCompletedData'
                    event_type:
                        const: action_item.completed
                  type: object
        ActionItemCreatedData:
            type: object
            required:
                - action_item_id
                - created_at
                - meeting_id
                - title
            properties:
                action_item_id:
                    type: string
                    format: uuid
                assignee_id:
                    type: string
                    format: uuid
                created_at:
                    type: string
                    format: date-time
                meeting_id:
                    type: string
                    format: uuid
                title:
                    type: string
        ActionItemCreatedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/ActionItemCreatedData'
                    event_type:
                        const: action_item.created
                  type: object
        ActionItemStatus:
            type: string
            description: Status of an action item
            enum:
                - needs_review
                - accepted
                - in_progress
                - completed
                - cancelled
                - blocked
        ActionItemUpdatedData:
            type: object
            required:
                - action_item_id
                - is_completed
                - meeting_id
                - status
                - updated_at
                - workspace_id
            properties:
                action_item_id:
                    type: string
                    format: uuid
                is_completed:
                    type: boolean
                meeting_id:
                    type: string
                    format: uuid
                status:
                    $ref: '#/components/schemas/ActionItemStatus'
                updated_at:
                    type: string
                    format: date-time
                workspace_id:
                    type: string
                    format: uuid
        ActionItemUpdatedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/ActionItemUpdatedData'
                    event_type:
                        const: action_item.updated
                  type: object
        MeetingCompletedData:
            type: object
            required:
                - completed_at
                - meeting_id
                - title
                - workspace_id
            properties:
                completed_at:
                    type: string
                    format: date-time
                meeting_id:
                    type: string
                    format: uuid
                title:
                    type: string
                workspace_id:
                    type: string
                    format: uuid
        MeetingCompletedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/MeetingCompletedData'
                    event_type:
                        const: meeting.completed
                  type: object
        MeetingCreatedData:
            type: object
            required:
                - created_at
                - created_by_user_id
                - meeting_id
                - title
                - workspace_id
            properties:
                created_at:
                    type: string
                    format: date-time
                created_by_user_id:
                    type: string
                    format: uuid
                meeting_id:
                    type: string
                    format: uuid
                title:
                    type: string
                workspace_id:
                    type: string
                    format: uuid
        MeetingCreatedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/MeetingCreatedData'
                    event_type:
                        const: meeting.created
                  type: object
        ParticipantAddedData:
            type: object
            required:
                - added_at
                - meeting_id
                - participants
            properties:
                added_at:
                    type: string
                    format: date-time
                meeting_id:
                    type: string
                    format: uuid
                participants:
                    type: array
                    items:
                        $ref: '#/components/schemas/ParticipantInfo'
        ParticipantAddedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/ParticipantAddedData'
                    event_type:
                        const: participant.added
                  type: object
        ParticipantInfo:
            type: object
            required:
                - participant_id
                - role
            properties:
                guest_email:
                    type: string
                    format: email
                participant_id:
                    type: string
                    format: uuid
                role:
                    type: string
                user_id:
                    type: string
                    format: uuid
        ParticipantRemovedData:
            type: object
            required:
                - meeting_id
                - participant_id
                - removed_at
            properties:
                guest_email:
                    type: string
                    format: email
                meeting_id:
                    type: string
                    format: uuid
                participant_id:
                    type: string
                    format: uuid
                removed_at:
                    type: string
                    format: date-time
                user_id:
                    type: string
                    format: uuid
        ParticipantRemovedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/ParticipantRemovedData'
                    event_type:
                        const: participant.removed
                  type: object
        PartnerMeetingSummary:
            type: object
            required:
                - meeting_id
                - title
            properties:
                meeting_id:
                    type: string
                title:
                    type: string
        UserConnectionRevokedData:
            type: object
            required:
                - connection_id
                - revoked_at
            properties:
                connection_id:
                    type: string
                    format: uuid
                revoked_at:
                    type: string
                    format: date-time
        UserConnectionRevokedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/UserConnectionRevokedData'
                    event_type:
                        const: user.connection.revoked
                  type: object
        WebhookPayloadBase:
            type: object
            required:
                - event_type
                - event_id
                - timestamp
                - partner_app_id
                - data
            properties:
                data:
                    type: object
                event_id:
                    type: string
                    format: uuid
                event_type:
                    type: string
                for_user:
                    $ref: '#/components/schemas/WebhookUserContext'
                partner_app_id:
                    type: string
                    format: uuid
                timestamp:
                    type: string
                    format: date-time
        WebhookUserContext:
            type: object
            description: User context for webhooks (CON-2165) - identifies which user the event is being delivered for
            required:
                - id
                - email
            properties:
                email:
                    type: string
                    format: email
                id:
                    type: string
                    format: uuid
        WorkflowAssignmentCreatedData:
            type: object
            required:
                - action_item_id
                - assignment_id
                - created_at
                - meeting_id
                - status
                - workflow_id
                - workflow_name
                - workspace_id
            properties:
                action_item_id:
                    type: string
                    format: uuid
                assignment_id:
                    type: string
                    format: uuid
                confidence_score:
                    type: number
                created_at:
                    type: string
                    format: date-time
                meeting_id:
                    type: string
                    format: uuid
                status:
                    type: string
                workflow_data_payload:
                    type: object
                    additionalProperties: true
                workflow_id:
                    type: string
                    format: uuid
                workflow_name:
                    type: string
                workspace_id:
                    type: string
                    format: uuid
        WorkflowAssignmentCreatedPayload:
            allOf:
                - $ref: '#/components/schemas/WebhookPayloadBase'
                - properties:
                    data:
                        $ref: '#/components/schemas/WorkflowAssignmentCreatedData'
                    event_type:
                        const: workflow.assignment.created
                  type: object
